{{/*###
*/}}
{{ define "tpl" }}
{{ $cf := .ClientFlags }}
{{ $ds := band $cf 1 }}
{{ $   := . }}

<head>
    {{/* Meta tags */}}
    <meta property="og:title" content="home | osu!Akatsuki" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://akatsuki.pw"/>
    <meta property="og:image" content="/static/logos/logo.png"/>
    <meta property="og:site_name" content="Akatsuki"/>
    <meta property="og:description" content="Akatsuki is an osu! private server mainly based around the relax mod - featuring score submission, leaderboards & rankings, custom pp, and much more for both relax and vanilla osu!"/>

    {{/* Twitter-specific stuff */}}
    <meta name="twitter:title" content="home | osu!Akatsuki" />
    <meta name="twitter:image" content="/static/logos/logo.png" />
    <meta name="twitter:url" content="https://akatsuki.pw" />
    <meta name="twitter:card" content="" />
</head>

<link rel="stylesheet" href="/static/css/pages/home.css">

<div class="masthead segment bg14">
    <div class="ui container">
      <div class="introduction">
        <div class="ui header small-lineh">
          <div class="library">
            osu!<b>Akatsuki</b>
          </div>
          <div class="tagline">
            <b>Welcome to osu!Akatsuki.</b> We are an osu! private server mainly based around the relax mod - featuring score submission, leaderboards &amp; rankings, custom pp, and much more for both relax and vanilla osu! We have a massive dedicated community between both our osu! and <a href="/discord">Discord</a> servers.
          </div>
        </h1>
        <div class="buttons">
            <a class="ui small pink button">Register</a>
            <a class="ui small blue button">Login</a>
          </div>
        </div>
    </div>
  </div>
</div>

<div class="ui container">
    {{ $set := systemSettings "website_home_alert" }}
    {{ with $set.website_home_alert.String }}
    <div class="ui warning message">
        {{ . | html }}
    </div>
    {{ end }}

    <br>

    {{/* Global Statistics */}}
    <div class="ui stackable four grid">
        <div class="five wide column less-pad">
            <div class="ui segment">
                <div class="ui grid">
                    <div class="four wide column">
                        <i class="angle right icon status-icon"></i>
                    </div>
                    <div class="twelve wide column">
                        <p class="status-head">{{ .T "%s" (rediget "ripple:submitted_scores_relax") | html }}</p>
                        <p class="status-footer">Total scores (Relax)</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="six wide column less-pad">
            <div class="ui segment">
                <div class="ui grid">
                    <div class="four wide column">
                        <i class="user plus icon status-icon"></i>
                    </div>
                    <div class="twelve wide column">
                        {{ range $key, $value := (qb "SELECT username FROM users WHERE privileges & 1 ORDER BY id DESC LIMIT 1") }}
                        <p class="status-head">{{ $value }}</p>
                        {{ end }}
                    <p class="status-footer">Latest player</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="five wide column less-pad">
            <div class="ui segment">
                <div class="ui grid">
                    <div class="four wide column">
                        <i class="angle double right icon status-icon"></i>
                    </div>
                    <div class="twelve wide column">
                        <p class="status-head">{{ .T "%s" (rediget "ripple:submitted_scores") | html }}</p>
                        <p class="status-footer">Total scores (Vanilla)</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="eight wide column less-pad">
            <div class="ui segment">
                <div class="ui grid">
                    <div class="four wide column">
                        <i class="thumbs up outline icon status-icon"></i>
                    </div>
                    <div class="twelve wide column">
                        {{ $d := (qb "SELECT ROUND(scores_relax.pp) AS pp, users.username, scores_relax.userid FROM scores_relax LEFT JOIN beatmaps USING(beatmap_md5) LEFT JOIN users ON users.id = scores_relax.userid WHERE users.privileges & 1 AND users.whitelist & 2 AND scores_relax.completed = 3 AND scores_relax.play_mode = 0 AND beatmaps.ranked = 2 ORDER BY scores_relax.pp DESC LIMIT 1") }}
                       <p class="status-head">{{ $d.pp }}pp</p>
                       <p class="status-footer">Top score (Relax)</p>
                       <p class="status-head" style="font-size: 12px!important;">Played by <a href="/u/{{ $d.userid }}?rx=1">{{ $d.username }}</a></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="eight wide column less-pad">
            <div class="ui segment">
                <div class="ui grid">
                    <div class="four wide column">
                        <i class="thumbs up icon status-icon"></i>
                    </div>
                    <div class="twelve wide column">
                        {{ $d := (qb "SELECT ROUND(scores.pp) AS pp, users.username, scores.userid FROM scores LEFT JOIN beatmaps USING(beatmap_md5) LEFT JOIN users ON users.id = scores.userid WHERE users.privileges & 1 AND users.whitelist & 1 AND scores.completed = 3 AND scores.play_mode = 0 AND beatmaps.ranked = 2 ORDER BY scores.pp DESC LIMIT 1") }}
                       <p class="status-head">{{ $d.pp }}pp</p>
                       <p class="status-footer">Top score (Vanilla)</p>
                       <p class="status-head" style="font-size: 12px!important;">Played by <a href="/u/{{ $d.userid }}">{{ $d.username }}</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div> {{/* Global Stats end past this /div */}}
</div>
{{ end }}
